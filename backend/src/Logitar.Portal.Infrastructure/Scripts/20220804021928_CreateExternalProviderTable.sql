START TRANSACTION;

CREATE TABLE "ExternalProvider" (
    "Sid" integer GENERATED BY DEFAULT AS IDENTITY,
    "Id" uuid NOT NULL DEFAULT (uuid_generate_v4()),
    "AddedAt" timestamp with time zone NOT NULL DEFAULT (now()),
    "AddedById" uuid NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000',
    "UserSid" integer NULL,
    "Key" character varying(256) NOT NULL,
    "Value" character varying(256) NOT NULL,
    "DisplayName" character varying(256) NULL,
    CONSTRAINT "PK_ExternalProvider" PRIMARY KEY ("Sid"),
    CONSTRAINT "FK_ExternalProvider_Users_UserSid" FOREIGN KEY ("UserSid") REFERENCES "Users" ("Sid")
);

CREATE UNIQUE INDEX "IX_ExternalProvider_Id" ON "ExternalProvider" ("Id");

CREATE INDEX "IX_ExternalProvider_Key_Value" ON "ExternalProvider" ("Key", "Value");

CREATE INDEX "IX_ExternalProvider_UserSid" ON "ExternalProvider" ("UserSid");

INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20220804021928_CreateExternalProviderTable', '6.0.7');

COMMIT;
